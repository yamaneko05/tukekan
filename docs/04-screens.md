# 4. 画面設計

## 4.1 画面一覧

| 画面名 | パス | 説明 |
|--------|------|------|
| ログイン | /login | ユーザー名/パスワードでログイン |
| ホーム | / | 自分の残高タブ + 履歴タブ |
| メンバー一覧 | /members | 全ユーザー一覧 |
| 他ユーザーダッシュボード | /members/[id] | 他ユーザーの残高一覧（閲覧専用） |
| 取引履歴 | /partners/[id] | 特定相手との取引履歴 |
| 設定 | /settings | プロフィール編集 |
| 取引登録 | (モーダル) | 新規取引の入力フォーム |

※ 新規登録画面は Phase 3（グループ機能）で実装予定

---

## 4.2 ナビゲーション設計

### ボトムバーナビゲーション採用

| 方式 | メリット | デメリット |
|------|----------|------------|
| ハンバーガーメニュー | 画面広く使える | タップ数が増える、発見されにくい |
| **ボトムバー（採用）** | 主要機能に1タップでアクセス | 画面下部を占有、項目数に制限 |

**採用理由:**
- 画面数が少ない（2項目）→ ボトムバーに収まる
- 頻繁に使う機能（ホーム、メンバー）へのアクセスを最優先
- スマホの片手操作で親指が届きやすい

### ボトムバーの項目（確定）

| アイコン | ラベル | パス | 説明 |
|----------|--------|------|------|
| 🏠 | ホーム | `/` | 残高・履歴タブ（メイン機能） |
| 👥 | メンバー | `/members` | 他ユーザー閲覧 |

**設定ページをボトムバーに入れない理由:**
- 使用頻度が低い
- ヘッダーの⚙️アイコンからアクセス可能

**取引登録はFAB（右下の+ボタン）で対応:**
- 最も頻繁に使う操作なので常に目立つ位置に配置
- モーダルで開くのでページ遷移不要

---

## 4.3 画面遷移図

```
[ログイン] ─── 認証成功 ───> [ホーム]
                               │
                               ├── 残高タブ
                               │     └── 相手タップ ──> [取引履歴]
                               │
                               ├── 履歴タブ
                               │     └── 取引タップ ──> [取引履歴]
                               │
                               ├── FAB(+) ──> [取引登録モーダル]
                               │
                               ├── ボトムバー[メンバー] ──> [メンバー一覧]
                               │                              │
                               │                              └── タップ ──> [他ユーザーダッシュボード]
                               │                                                │
                               │                                                └── 相手タップ ──> [取引履歴]
                               │
                               └── ヘッダー[設定] ──> [設定]
```

---

## 4.4 共通レイアウト

```
┌────────────────────────────────┐
│  貸し借り管理          [⚙️]   │  ← ヘッダー（設定アイコンのみ）
├────────────────────────────────┤
│                                │
│                                │
│        メインコンテンツ        │
│                                │
│                                │
│                         [＋]   │  ← FAB（右下固定）
├────────────────────────────────┤
│     [🏠]          [👥]        │  ← ボトムバー
│     ホーム       メンバー      │
└────────────────────────────────┘
```

---

## 4.5 ホーム画面（残高タブ） レイアウト

```
┌────────────────────────────────┐
│  貸し借り管理          [⚙️]   │
├────────────────────────────────┤
│  [残高]  [履歴]                │  ← タブ切替
├────────────────────────────────┤
│                                │
│   あなたの貸借残高             │
│   ¥ 55,382                     │
│                                │
├────────────────────────────────┤
│  相手ごとの残高                │
│ ┌────────────────────────────┐ │
│ │ えいご          ¥35,773  > │ │
│ │ おうた          ¥25,130  > │ │
│ │ ほんじょう      -¥34,966 > │ │  ← マイナスは赤字
│ └────────────────────────────┘ │
│                                │
│                         [＋]   │
├────────────────────────────────┤
│     [🏠]          [👥]        │
│     ホーム       メンバー      │
└────────────────────────────────┘
```

---

## 4.6 ホーム画面（履歴タブ） レイアウト

```
┌────────────────────────────────┐
│  貸し借り管理          [⚙️]   │
├────────────────────────────────┤
│  [残高]  [履歴]                │  ← 履歴タブ選択中
├────────────────────────────────┤
│  全取引履歴                    │
│ ┌────────────────────────────┐ │
│ │ 2025/01/15                 │ │
│ │ えいご  麻雀     +¥5,000   │ │
│ ├────────────────────────────┤ │
│ │ 2025/01/14                 │ │
│ │ おうた  ランチ   -¥1,200   │ │
│ ├────────────────────────────┤ │
│ │ 2025/01/10                 │ │
│ │ えいご  返済     -¥3,000   │ │
│ └────────────────────────────┘ │
│                                │
│                         [＋]   │
├────────────────────────────────┤
│     [🏠]          [👥]        │
│     ホーム       メンバー      │
└────────────────────────────────┘
```

---

## 4.7 メンバー一覧画面 レイアウト

```
┌────────────────────────────────┐
│  < 戻る     メンバー           │
├────────────────────────────────┤
│ ┌────────────────────────────┐ │
│ │ たろう          ¥12,500  > │ │  ← 総残高を表示
│ │ はなこ          -¥8,200  > │ │
│ │ けんじ          ¥45,000  > │ │
│ └────────────────────────────┘ │
│                                │
│                                │
├────────────────────────────────┤
│     [🏠]          [👥]        │
│     ホーム       メンバー      │
└────────────────────────────────┘
```

---

## 4.8 他ユーザーダッシュボード画面 レイアウト

```
┌────────────────────────────────┐
│  < 戻る     たろうの貸借       │
├────────────────────────────────┤
│                                │
│   たろうの貸借残高             │
│   ¥ 12,500                     │
│                                │
├────────────────────────────────┤
│  相手ごとの残高                │
│ ┌────────────────────────────┐ │
│ │ Aさん           ¥8,000   > │ │  ← タップで取引履歴へ
│ │ Bさん           ¥4,500   > │ │
│ └────────────────────────────┘ │
│                                │
├────────────────────────────────┤
│     [🏠]          [👥]        │
│     ホーム       メンバー      │
└────────────────────────────────┘
```

---

## 4.9 取引履歴画面 レイアウト

```
┌────────────────────────────────┐
│  < 戻る     えいご             │
├────────────────────────────────┤
│                                │
│   現在の残高                   │
│   ¥ 35,773                     │
│                                │
├────────────────────────────────┤
│  取引履歴                      │
│ ┌────────────────────────────┐ │
│ │ 2025/01/15  麻雀   +¥5,000 │ │
│ │ 2025/01/10  返済   -¥3,000 │ │
│ │ 2025/01/05  飲み会 +¥8,000 │ │
│ └────────────────────────────┘ │
│                                │
│                         [＋]   │
├────────────────────────────────┤
│     [🏠]          [👥]        │
│     ホーム       メンバー      │
└────────────────────────────────┘
```

---

## 4.10 取引登録モーダル レイアウト

```
┌─────────────────────────────────────┐
│                                     │
│  ┌─────────────────────────────┐   │
│  │      新しい取引        [×]  │   │
│  ├─────────────────────────────┤   │
│  │                             │   │
│  │  相手                       │   │
│  │  ┌─────────────────────┐   │   │
│  │  │ 選択してください  ▼ │   │   │  ← コンボボックス
│  │  └─────────────────────┘   │   │
│  │  ┌─────────────────────┐   │   │
│  │  │ 🔍 検索...          │   │   │  ← 検索・フィルタ
│  │  ├─────────────────────┤   │   │
│  │  │ ● えいご            │   │   │  ← 既存Partner
│  │  │ ○ おうた            │   │   │
│  │  │ ○ ほんじょう        │   │   │
│  │  ├─────────────────────┤   │   │
│  │  │ ＋ 新しい相手を追加  │   │   │  ← 新規作成
│  │  └─────────────────────┘   │   │
│  │                             │   │
│  │  金額                       │   │
│  │  ┌─────────────────────┐   │   │
│  │  │ ¥                   │   │   │
│  │  └─────────────────────┘   │   │
│  │  ┌─────────┐ ┌─────────┐   │   │
│  │  │ 貸した  │ │ 借りた  │   │   │  ← トグルボタン
│  │  │   (+)   │ │   (-)   │   │   │
│  │  └─────────┘ └─────────┘   │   │
│  │                             │   │
│  │  説明（任意）               │   │
│  │  ┌─────────────────────┐   │   │
│  │  │                     │   │   │
│  │  └─────────────────────┘   │   │
│  │  ┌───────┐┌───────┐┌─────┐ │   │
│  │  │ 麻雀 ││ドライブ││ランチ│ │   │  ← サジェストチップ
│  │  └───────┘└───────┘└─────┘ │   │
│  │                             │   │
│  │  日付                       │   │
│  │  ┌─────────────────────┐   │   │
│  │  │ 📅 2025/01/15       │   │   │  ← カレンダーピッカー
│  │  └─────────────────────┘   │   │
│  │                             │   │
│  │  ┌─────────────────────┐   │   │
│  │  │        登録         │   │   │  ← プライマリボタン
│  │  └─────────────────────┘   │   │
│  │                             │   │
│  └─────────────────────────────┘   │
│                                     │
└─────────────────────────────────────┘
      ↑ 背景はオーバーレイ（半透明）
```

---

## 4.11 取引登録フォーム 入力フロー

```
1. 相手選択
   ┌─────────────────────────────┐
   │ コンボボックスをタップ      │
   │         ↓                   │
   │ ドロップダウンが展開        │
   │         ↓                   │
   │ ・既存Partnerから選択       │
   │ ・検索でフィルタ            │
   │ ・「新しい相手を追加」で    │
   │   インライン入力欄が表示    │
   └─────────────────────────────┘

2. 金額入力
   ┌─────────────────────────────┐
   │ 数字を入力                  │
   │         ↓                   │
   │ 「貸した」or「借りた」を選択│
   │  → 自動で符号が決定        │
   │  → 貸した: +金額           │
   │  → 借りた: -金額           │
   └─────────────────────────────┘

3. 説明入力（任意）
   ┌─────────────────────────────┐
   │ サジェストチップをタップ    │
   │  → 入力欄に自動入力        │
   │                             │
   │ または自由入力              │
   └─────────────────────────────┘

4. 日付選択
   ┌─────────────────────────────┐
   │ デフォルト: 今日            │
   │ タップでカレンダー表示      │
   │ 過去日のみ選択可能          │
   └─────────────────────────────┘

5. 登録
   ┌─────────────────────────────┐
   │ 「登録」ボタンをタップ      │
   │         ↓                   │
   │ バリデーション実行          │
   │         ↓                   │
   │ 成功: モーダルを閉じて      │
   │       一覧を更新            │
   │ 失敗: エラーメッセージ表示  │
   └─────────────────────────────┘
```

---

## 4.12 取引登録フォーム バリデーション

| 項目 | ルール | エラーメッセージ |
|------|--------|------------------|
| 相手 | 必須 | 「相手を選択してください」 |
| 金額 | 必須、1〜10,000,000 | 「金額を入力してください」「金額は1,000万円以下で入力してください」 |
| 説明 | 任意、最大100文字 | 「説明は100文字以内で入力してください」 |
| 日付 | 必須、未来日不可 | 「未来の日付は選択できません」 |
